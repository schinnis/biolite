
<!-- biolite product meta -->
{% assign product_modules = product.metafields.product_module %}
 
<!-- load a json version of the product object -->
<script type="text/javascript">
  var product = {{ product | json }}

  var money_format = "{{ shop.money_format }}";
</script>

{% comment %}

  Rich snippets (itemscope, itemtype, etc.) for products are a theme requirement,
  and allow search engines to easily understand what the content is.

  For more information on these Scheme.org tags, visit:
    - http://schema.org/docs/gs.html

{% endcomment %}
<div itemscope itemtype="http://schema.org/Product">

  <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
  <meta itemprop="image" content="{{ product.featured_image.src | product_img_url: 'grande' }}">

<section class="section">
  <div class="grid">
    <div class="wrapper"> 
      <div class="grid__item large--one-half">

        {% if product.images.size > 0 %}

          <div class="product-photo-container" id="productPhoto">
            <a href="{{ product.featured_image.src | product_img_url: 'original' }}">
              <img src="{{ product.featured_image.src | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" id="productPhotoImg">
            </a>
          </div>

          {% if product.images.size > 1 %}
            <ul class="product-photo-thumbs grid-uniform" id="productThumbs">
              {% for image in product.images %}
                <li class="grid__item one-quarter">
                  <a href="{{ image.src | product_img_url: 'grande' }}" class="product-photo-thumb">
                    <img src="{{ image.src | product_img_url: 'compact' }}" alt="{{ image.alt | escape }}"> 
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}

        {% endif %}

      </div>

      <div class="grid__item large--one-half">
        <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
          
          <meta itemprop="priceCurrency" content="{{ shop.currency }}">
          
          {% if product.available %}
            <link itemprop="availability" href="http://schema.org/InStock">
          {% else %}
            <link itemprop="availability" href="http://schema.org/OutOfStock">
          {% endif %}

            {% include 'product-price-variants' %}

            <script type="text/javascript">
              BioliteGlobal.biolite_set_product_price(product);
              jQuery('select#currencies').change(function() {
                BioliteGlobal.biolite_set_product_price(product);
              });
            </script>

          {% comment %}
            ID addToCartForm is a selector for the ajaxify cart plugin
          {% endcomment %}
          <form action="/cart/add" method="post" enctype="multipart/form-data" id="addToCartForm">
            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" name="quantity" value="1" min="1">
            <input type="submit" name="add" class="btn" id="addToCart" value="Add to Cart">
          </form>
          
          <div class="product-description rte" itemprop="description">
            {{ product.description }}
            {% include 'addthis' %}
          </div>

        </div>

        {% comment %}
          If the user is on a collection product page (ie with /collections/collection-handle/products/product-handle)
          in the URL, we can show next/previous links to other products in the collection.
        {% endcomment %}
        {% if collection %}
          {% if collection.previous_product or collection.next_product %}
            <p>

            {% if collection.previous_product %}
              {% capture prev_url %}{{ collection.previous_product}}#content{% endcapture %}
              <span class="left">
                {{ '&larr; Previous Product' | link_to: prev_url }}
              </span>
            {% endif %}

            {% if collection.next_product %}
              {% capture next_url %}{{ collection.next_product}}#content{% endcapture %}
              <span class="right">
                {{ 'Next Product &rarr;' | link_to: next_url }}
              </span>
            {% endif %}

            </p>
          {% endif %}
        {% endif %}

      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="grid">
    <div class="wrapper">

      {% if product_modules.video_hero %} 
        <div class="grid__item large--one-whole">

          <div class="video_hero">
          {{ product_modules.video_hero }}
          </div>

        </div>
      {% endif %} 

    </div>
  </div>
</section>

<section class="section">
  <div class="grid">
    <div class="wrapper">
      <div class="grid__item large--one-whole">
        <h3>User Reviews</h3>
        <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
      </div>
    </div>
  </div>
</section>
